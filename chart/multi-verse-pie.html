<link rel="import" href="../../polymer/polymer.html">
<link rel="import" href="../../multi-chart/multi-selector.html">
<link rel="import" href="../../multi-chart/chart/multi-chart-simple.html">
<link rel="import" href="../../multi-chart/shape/multi-shape-pie.html">
<link rel="import" href="../../multi-chart/d3-shape/d3-pie.html">
<link rel="import" href="../multi-shared-styles.html">
<link rel="import" href="multi-verse-properties-behavior.html">
<!-- <link rel="import" href="multi-axis-behaviors.html"> -->
<!--
`multi-poly`
polymer elements for multivariate analysis (depend on crossfilter, universe and reductio)

@demo demo/index.html 
-->
<dom-module id="multi-verse-pie">
  <template>
    <style is="custom-style" include="multi-verse">

    </style>
    <multi-chart-simple id="chart" 
        title="[[title]]"
        data="[[data]]"
        subtitle="[[subtitle]]"

        width="{{width}}" 
        height="{{height}}" 
        center="{{center}}" 

        color-scale="{{colorScale}}" 
        key-accessor-path="[[keyAccessorPath]]" 
        key-accessor="{{keyAccessor}}" 
        value-accessor-path="[[valueAccessorPath]]" 
        value-accessor="{{valueAccessor}}"
       >
        <d3-pie  data="{{arcs}}" value="[[valueAccessor]]" pad-angle="[[padAngle]]" sort="[[sort]]" sort-values="[[sortValues]]"></d3-pie>
        <multi-shape-pie 
          width="[[width]]" 
          height="[[height]]" 
          center="[[center]]" 
          arcs="[[arcs]]"
          inner-radius="[[innerRadius]]"
          color-scale="[[colorScale]]"></multi-shape-pie>
         <multi-selector selection-type="select" accessor="[[keyAccessor]]"></multi-selector>  

        <!-- <multi-legend legend chart-width="{{width}}" scale="[[colorScale]]" position="top-right" ></multi-legend> -->
        <multi-selector selection-type="select"  accessor="[[xAccessor]]"></multi-selector> 
        <content></content>
      </multi-chart-simple>

  </template>
  <script>
  Polymer({

    is: 'multi-verse-pie',

    properties: {

      /**
       * `keyAccessorPath` path for computing the xAccessor function
       * a value of ´key´ will generate  an accessor function like ´function(d) {return d.key}´ 
       * a value of ´+value.count´ will generate  an accessor function like ´function(d) {return +d.value.count}´ 
       */
      keyAccessorPath: {
        type: String,
        value: 'key'
      },

       /**
       * `valueAccessorPath` path for computing the xAccessor function
       * a value of ´key´ will generate  an accessor function like ´function(d) {return d.key}´ 
       * a value of ´+value.count´ will generate  an accessor function like ´function(d) {return +d.value.count}´ 
       */
      valueAccessorPath: {
        type: String,
        value: '+value.count'
      },

    },

    behaviors: [
       Polymer.multiverseChartProperties,
    ]

  });
  </script>
</dom-module>
