<link rel="import" href="../../polymer/polymer.html">
<link rel="import" href="../../multi-chart/multi-selector.html">
<link rel="import" href="../../multi-chart/shape/multi-shape-bar.html">
<link rel="import" href="../../multi-chart/chart/multi-chart-coordinate.html">
<link rel="import" href="../../multi-chart/properties/multi-x-coordinates-properties-behavior.html">
<link rel="import" href="../../multi-chart/properties/multi-y-coordinates-properties-behavior.html">
<link rel="import" href="../../multi-chart/properties/multi-color-properties-behavior.html">
<link rel="import" href="../multi-shared-styles.html">
<link rel="import" href="multi-verse-properties-behavior.html">
<!-- <link rel="import" href="multi-axis-behaviors.html"> -->
<!--
`multi-poly`
polymer elements for multivariate analysis (depend on crossfilter, universe and reductio)

@demo demo/index.html 
-->
<dom-module id="multi-verse-bar">
  <template>
    <style is="custom-style" include="multi-verse">

    </style>
    <multi-chart-coordinate id="chart" 
        title="[[title]]"
        data="[[data]]"
        subtitle="[[subtitle]]"
        x-accessor-path="[[xAccessorPath]]" 
        y-accessor-path="[[yAccessorPath]]" 
        color-domain="[[colorDomain]]" 
        width="{{width}}" 
        height="{{height}}"
        color-scale="{{colorScale}}" 
        x-axis-text="[[xAxisText]]" 
        y-axis-text="[[yAxisText]]" 
        x-scale="{{xScale}}" 
        x-accessor="{{xAccessor}}" 
        y-scale="{{yScale}}" 
        y-accessor="{{yAccessor}}">
        <multi-shape-bar 
          index="count"
          height="[[height]]" 
          x-accessor="[[xAccessor]]" 
          y-accessor="[[yAccessor]]" 
          x-scale="[[xScale]]" 
          y-scale="[[yScale]]" 
          color-scale="[[colorScale]]"></multi-shape-bar>
        <!-- <multi-legend legend chart-width="{{width}}" scale="[[colorScale]]" position="top-right" ></multi-legend> -->
        <multi-selector selected-items="{{selected-items}}" is-range="{{isRange}}" has-selection="{{hasSelection}}" x-continuous="[[xContinuous]]" selection-type="brushX" width="[[width]]"  height="[[height]]" x-scale="[[xScale]]" accessor="[[xAccessor]]"></multi-selector> 
        <content></content>
      </multi-chart-coordinate>

  </template>
  <script>
  Polymer({

    is: 'multi-verse-bar',

    properties: {

       /**
       * `xContinuous` indicate true if we have a `continuous` scale on X when the xScale is `ordinal` (e.g. a scaleBand for bar charts). If true a `xContinuousScale` is computed on the selector.
       * TODO: is there a way to infer this information otherwise (type of crossfilter group ? )
       */
      xContinuous: {
        type: Boolean,
      },

      colorDomain: {
        type: 'Array',
        value: ['count']
      }

    },

    behaviors: [
      Polymer.multiverseChartProperties,
      Polymer.multixCoordinatesProperties,
      Polymer.multiyCoordinatesProperties,
      Polymer.multiColorProperties   
    ]

  });
  </script>
</dom-module>
